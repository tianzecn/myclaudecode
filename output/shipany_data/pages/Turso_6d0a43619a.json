{
  "url": "https://shipany.ai/zh/docs/database/turso",
  "title": "Turso",
  "content": "Turso 定位是“小而强”的边缘数据库，百分百兼容 SQLite语法，并发读写性能远高于传统 SQLite，主打 AI 应用、嵌入式和 Serverless 场景。\n\nShipAny 已集成 Turso，按照下面的步骤快速接入。\n\n注册 Turso Cloud 账号，登录管理后台，点击 Create Database 按钮，创建一个数据库。\n\n进入上一步创建的数据库，点击 Create Token 按钮，创建一个过期时间为 Nerver，有 Read & Write 权限的 Token。\n\n复制上一步设置的数据库 Database URL 和 Token。\n\n在项目的环境变量文件中，填入 Turso 数据库相关的配置。\n\n使用 Turso 数据库时，数据表结构定义在 ./src/config/db/schema.sqlite.ts 文件中，你需要导出这个文件的数据表。\n\n打开 ./src/config/db/schema.ts 文件，修改内容为：\n\n你可以在 Turso Cloud 管理数据库，也可以在本地执行命令:\n\n如果你需要新增数据表，或者修改数据表字段，可以打开 ./src/config/db/schema.sqlite.ts 文件，修改数据表结构。\n\n如果你需要修改数据表连接参数，比如配置自定义选项、连接池等，可以修改 ./src/core/db/sqlite.ts 文件中的逻辑。\n\n在进行数据操作时，默认使用的是 ./src/core/db/index.ts 导出的 db() 对象，导出类型是 any，在某些情况下，可能会缺乏类型提示。\n\n如果你希望使用强类型的数据库对象，可以在操作数据时，使用以下方式获取数据库对象：\n\nTurso 数据库支持部署到 Cloudflare Workers，但是不支持使用 Hyperdrive 加速数据库访问。\n\nHyperdrive 目前只面向基于 TCP 的关系型数据库连接池/代理（典型是 Postgres / MySQL 这类），不是给 SQLite/libSQL 这种协议用的。\n\n所以在 Cloudflare Workers 上部署时，只需要填 Turso Cloud 的配置信息即可，无需配置 Hyperdrive。\n\n在 Cloudflare Workers 部署的 wrangler.toml 部分内容参考：",
  "headings": [
    {
      "level": "h1",
      "text": "Turso",
      "id": ""
    },
    {
      "level": "h2",
      "text": "快速开始",
      "id": "快速开始"
    },
    {
      "level": "h2",
      "text": "自定义",
      "id": "自定义"
    },
    {
      "level": "h3",
      "text": "修改数据表",
      "id": "修改数据表"
    },
    {
      "level": "h3",
      "text": "修改数据库连接",
      "id": "修改数据库连接"
    },
    {
      "level": "h3",
      "text": "部署到 Cloudflare Workers",
      "id": "部署到-cloudflare-workers"
    },
    {
      "level": "h2",
      "text": "参考",
      "id": "参考"
    }
  ],
  "code_samples": [
    {
      "code": "DATABASE_PROVIDER = \"turso\"\nDATABASE_URL = \"turso-database-url\"\nDATABASE_AUTH_TOKEN = \"turso-auth-token\"\nDB_SCHEMA_FILE = \"./src/config/db/schema.sqlite.ts\"\nDB_MIGRATIONS_OUT = \"./src/config/db/migrations_turso\"",
      "language": "unknown"
    },
    {
      "code": "export * from './schema.sqlite';",
      "language": "sql"
    },
    {
      "code": "pnpm db:generate\npnpm db:migrate",
      "language": "unknown"
    },
    {
      "code": "pnpm db:studio",
      "language": "unknown"
    },
    {
      "code": "pnpm db:generate\npnpm db:migrate",
      "language": "unknown"
    },
    {
      "code": "import { db } from '@/core/db';\nimport { user } from '@/config/db/schema';\n\nconst [result] = await db().select().from(user).limit(1);",
      "language": "csharp"
    },
    {
      "code": "import { dbSqlite } from '@/core/db';\nimport { user } from '@/config/db/schema';\n\nconst [result] = await dbSqlite().select().from(user).limit(1);",
      "language": "csharp"
    },
    {
      "code": "import { getSqliteDb } from '@/core/db/sqlite';\nimport { user } from '@/config/db/schema';\n\nconst [result] = await getSqliteDb().select().from(user).limit(1);",
      "language": "csharp"
    },
    {
      "code": "[[hyperdrive]]\nbinding = \"HYPERDRIVE\"\nid = \"\"\nlocalConnectionString = \"\"\n\n[vars]\nDATABASE_PROVIDER = \"turso\"\nDATABASE_URL = \"turso-database-url\"\nDATABASE_AUTH_TOKEN = \"turso-auth-token\"",
      "language": "json"
    }
  ],
  "patterns": [],
  "links": [
    "https://shipany.ai/zh/docs/quick-start",
    "https://shipany.ai/zh/docs/config",
    "https://shipany.ai/zh/docs/page-builder",
    "https://shipany.ai/zh/docs/vibe-coding",
    "https://shipany.ai/zh/docs/database",
    "https://shipany.ai/zh/docs/database/supabase",
    "https://shipany.ai/zh/docs/database/neon",
    "https://shipany.ai/zh/docs/database/postgresql",
    "https://shipany.ai/zh/docs/database/turso",
    "https://shipany.ai/zh/docs/database/sqlite",
    "https://shipany.ai/zh/docs/database/mysql",
    "https://shipany.ai/zh/docs/email",
    "https://shipany.ai/zh/docs/analytics",
    "https://shipany.ai/zh/docs/ads",
    "https://shipany.ai/zh/docs/customer-service"
  ]
}