{
  "url": "https://shipany.ai/zh/docs/database/neon",
  "title": "Neon",
  "content": "Neon 是一个开源的 PostgreSQL 数据库，支持云原生、边缘计算、Serverless 等场景。\n\nShipAny 已集成 Neon，按照下面的步骤快速接入。\n\n注册 Neon 账号，登录 管理后台，点击 New Project 按钮，创建一个项目。\n\n进入上一步创建的数据库，点击 Connect 按钮，复制数据库连接地址。\n\n在终端执行复制的命令，测试数据库连接是否正常。\n\nNeon 数据库的 Database URL 为：\n\n复制上一步设置的数据库 Database URL。\n\n在项目的环境变量文件中，填入 Neon 数据库相关的配置。\n\n使用 Neon 数据库时，数据表结构定义在 ./src/config/db/schema.postgres.ts 文件中，你需要导出这个文件的数据表。\n\n打开 ./src/config/db/schema.ts 文件，修改内容为：\n\n你可以在 Neon 管理后台 管理数据库，也可以在本地执行命令:\n\n如果你需要新增数据表，或者修改数据表字段，可以打开 ./src/config/db/schema.postgres.ts 文件，修改数据表结构。\n\n如果你需要修改数据表连接参数，比如配置自定义选项、连接池等，可以修改 ./src/core/db/postgres.ts 文件中的逻辑。\n\n在进行数据操作时，默认使用的是 ./src/core/db/index.ts 导出的 db() 对象，导出类型是 any，在某些情况下，可能会缺乏类型提示。\n\n如果你希望使用强类型的数据库对象，可以在操作数据时，使用以下方式获取数据库对象：\n\nNeon 数据库支持部署到 Cloudflare Workers，也支持使用 Hyperdrive 加速数据库访问。\n\n使用 Hyperdrive 加速数据库访问的配置参考：配置 Hyperdrive。\n\n在 Cloudflare Workers 部署项目使用 Neon 数据库的 wrangler.toml 部分内容参考：",
  "headings": [
    {
      "level": "h1",
      "text": "Neon",
      "id": ""
    },
    {
      "level": "h2",
      "text": "快速开始",
      "id": "快速开始"
    },
    {
      "level": "h2",
      "text": "自定义",
      "id": "自定义"
    },
    {
      "level": "h3",
      "text": "修改数据表",
      "id": "修改数据表"
    },
    {
      "level": "h3",
      "text": "修改数据库连接",
      "id": "修改数据库连接"
    },
    {
      "level": "h3",
      "text": "部署到 Cloudflare Workers",
      "id": "部署到-cloudflare-workers"
    },
    {
      "level": "h2",
      "text": "参考",
      "id": "参考"
    }
  ],
  "code_samples": [
    {
      "code": "psql 'postgresql://neondb_owner:xxxxxx@xxx.neon.tech/neondb?sslmode=require&channel_binding=require'",
      "language": "python"
    },
    {
      "code": "postgresql://neondb_owner:xxxxxx@xxx.neon.tech/neondb?sslmode=require&channel_binding=require",
      "language": "yaml"
    },
    {
      "code": "DATABASE_PROVIDER = \"postgresql\"\nDATABASE_URL = \"neon-database-url\"\nDB_SCHEMA_FILE = \"./src/config/db/schema.postgres.ts\"\nDB_MIGRATIONS_OUT = \"./src/config/db/migrations\"",
      "language": "unknown"
    },
    {
      "code": "export * from './schema.postgres';",
      "language": "sql"
    },
    {
      "code": "pnpm db:generate\npnpm db:migrate",
      "language": "unknown"
    },
    {
      "code": "pnpm db:studio",
      "language": "unknown"
    },
    {
      "code": "pnpm db:generate\npnpm db:migrate",
      "language": "unknown"
    },
    {
      "code": "import { db } from '@/core/db';\nimport { user } from '@/config/db/schema';\n\nconst [result] = await db().select().from(user).limit(1);",
      "language": "csharp"
    },
    {
      "code": "import { dbPostgres } from '@/core/db';\nimport { user } from '@/config/db/schema';\n\nconst [result] = await dbPostgres().select().from(user).limit(1);",
      "language": "csharp"
    },
    {
      "code": "import { getPostgresDb } from '@/core/db/postgres';\nimport { user } from '@/config/db/schema';\n\nconst [result] = await getPostgresDb().select().from(user).limit(1);",
      "language": "csharp"
    },
    {
      "code": "[[hyperdrive]]\nbinding = \"HYPERDRIVE\"\nid = \"your-hyperdrive-config-id\"\nlocalConnectionString = \"postgresql://neondb_owner:xxxxxx@xxx.neon.tech/neondb?sslmode=require&channel_binding=require\"\n\n[vars]\nDATABASE_PROVIDER = \"postgresql\"\nDATABASE_URL = \"postgresql://neondb_owner:xxxxxx@xxx.neon.tech/neondb?sslmode=require&channel_binding=require\"",
      "language": "json"
    }
  ],
  "patterns": [],
  "links": [
    "https://shipany.ai/zh/docs/quick-start",
    "https://shipany.ai/zh/docs/config",
    "https://shipany.ai/zh/docs/page-builder",
    "https://shipany.ai/zh/docs/vibe-coding",
    "https://shipany.ai/zh/docs/database",
    "https://shipany.ai/zh/docs/database/supabase",
    "https://shipany.ai/zh/docs/database/neon",
    "https://shipany.ai/zh/docs/database/postgresql",
    "https://shipany.ai/zh/docs/database/turso",
    "https://shipany.ai/zh/docs/database/sqlite",
    "https://shipany.ai/zh/docs/database/mysql",
    "https://shipany.ai/zh/docs/email",
    "https://shipany.ai/zh/docs/analytics",
    "https://shipany.ai/zh/docs/ads",
    "https://shipany.ai/zh/docs/customer-service",
    "https://shipany.ai/zh/docs/deploy/cloudflare"
  ]
}